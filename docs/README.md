# Beam Deflection Calculator - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å

–≠—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ **Beam Deflection Calculator** - –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –Ω–∞ Rails 8 –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–≥–∏–±–∞ –±–∞–ª–æ–∫ –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π.

## –û –ø—Ä–æ–µ–∫—Ç–µ

**Beam Deflection Calculator** - —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∏–Ω–∂–µ–Ω–µ—Ä–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤ –ø—Ä–æ–≥–∏–±–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω—ã—Ö –±–∞–ª–æ–∫ —Å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å—é:
- –ö–∞—Ç–∞–ª–æ–≥ —Ç–∏–ø–æ–≤ –±–∞–ª–æ–∫ —Å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–æ–≤ –ø—Ä–æ–≥–∏–±–∞ —Å –∑–∞–¥–∞–Ω–Ω—ã–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –Ω–∞–≥—Ä—É–∑–∫–∏
- –°–∏—Å—Ç–µ–º–∞ –º–æ–¥–µ—Ä–∞—Ü–∏–∏ —Ä–∞—Å—á–µ—Ç–æ–≤
- RESTful JSON API —Å JWT –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Backend
- **Ruby**: 3.3.9
- **Rails**: 8.0.3
- **Database**: PostgreSQL 15
- **Cache**: Redis 7
- **Storage**: MinIO (S3-compatible)

### –ö–ª—é—á–µ–≤—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏
- **jwt** - JSON Web Token –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
- **bcrypt** - —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–æ–ª–µ–π
- **rswag** - Swagger/OpenAPI –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **aws-sdk-s3** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å MinIO
- **pundit** - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è

### DevOps
- **Docker** + **Docker Compose** –¥–ª—è –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏–∏
- **RSpec** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **RuboCop** –¥–ª—è code linting
- **Brakeman** –¥–ª—è security scanning

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

### üìä –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

#### [1. Entity-Relationship Diagram (ERD)](architecture/ERD.md)
–°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π, —Å–≤—è–∑–µ–π –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π.

**–û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏**:
- **User** - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å–∏—Å—Ç–µ–º—ã (–æ–±—ã—á–Ω—ã–µ + –º–æ–¥–µ—Ä–∞—Ç–æ—Ä—ã)
- **Beam** - –∫–∞—Ç–∞–ª–æ–≥ –±–∞–ª–æ–∫ —Å —Ñ–∏–∑–∏—á–µ—Å–∫–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- **BeamDeflection** - —Ä–∞—Å—á–µ—Ç—ã –ø—Ä–æ–≥–∏–±–∞ —Å state machine
- **BeamDeflectionBeam** - join-—Ç–∞–±–ª–∏—Ü–∞ —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏

**–¢–µ–º—ã**:
- –û–ø–∏—Å–∞–Ω–∏–µ –ø–æ–ª–µ–π –∏ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö
- Foreign keys –∏ –∏–Ω–¥–µ–∫—Å—ã
- Check constraints –∏ –≤–∞–ª–∏–¥–∞—Ü–∏–∏
- –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–≥–∏–±–∞

#### [2. State Machine Diagram](architecture/STATE_MACHINE.md)
–ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª —Ä–∞—Å—á–µ—Ç–æ–≤ –ø—Ä–æ–≥–∏–±–∞ —Å –ø–µ—Ä–µ—Ö–æ–¥–∞–º–∏ –º–µ–∂–¥—É —Å–æ—Å—Ç–æ—è–Ω–∏—è–º–∏.

**–°–æ—Å—Ç–æ—è–Ω–∏—è**:
- `draft` ‚Üí `formed` ‚Üí `completed` / `rejected`
- `draft` ‚Üí `deleted`

**–¢–µ–º—ã**:
- –ú–∞—Ç—Ä–∏—Ü–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ—Ö–æ–¥–∞—Ö
- –í–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API

#### [3. API Architecture](architecture/API_ARCHITECTURE.md)
–ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ RESTful JSON API —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤.

**–û—Å–Ω–æ–≤–Ω—ã–µ endpoints**:
- `/api/auth/*` - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥, –≤—ã—Ö–æ–¥
- `/api/beams` - CRUD –±–∞–ª–æ–∫
- `/api/beam_deflections` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞–º–∏
- `/api/me` - –ø—Ä–æ—Ñ–∏–ª—å —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**–¢–µ–º—ã**:
- Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- –§–æ—Ä–º–∞—Ç—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
- –ö–æ–¥—ã –æ—à–∏–±–æ–∫
- –ü—Ä–∏–º–µ—Ä—ã curl –∫–æ–º–∞–Ω–¥

#### [4. Authentication & Authorization Flow](architecture/AUTH_FLOW.md)
–î–µ—Ç–∞–ª—å–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ —Å JWT –∏ Redis blacklist.

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**:
- JWT Token Service (–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ/–¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ)
- JWT Blacklist Service (Redis —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
- Api::BaseController (middleware –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏)
- –ú–∞—Ç—Ä–∏—Ü–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –ø–æ —Ä–æ–ª—è–º

**–¢–µ–º—ã**:
- Sequence diagrams –¥–ª—è sign up/in/out
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- Best practices
- Troubleshooting

#### [5. Docker Architecture](architecture/DOCKER_ARCHITECTURE.md)
–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Docker Compose —Å 4 —Å–µ—Ä–≤–∏—Å–∞–º–∏.

**–°–µ—Ä–≤–∏—Å—ã**:
- **web** - Rails –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Puma)
- **db** - PostgreSQL 15
- **redis** - Redis 7 (AOF persistence)
- **minio** - MinIO S3 (—Ö—Ä–∞–Ω–∏–ª–∏—â–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)

**–¢–µ–º—ã**:
- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è docker-compose.yml
- Volumes –∏ networking
- Development workflow
- Production considerations
- Troubleshooting

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Docker Desktop / Docker Engine
- Docker Compose v2+
- Git

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone <repository-url>
cd exciting-greider

# 2. –°–æ–∑–¥–∞—Ç—å .env —Ñ–∞–π–ª (—Å–º. .env.example)
cp .env.example .env

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
docker-compose up

# 4. –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ: –≤—ã–ø–æ–ª–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏
docker-compose exec web bin/rails db:create db:migrate

# 5. (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ó–∞–≥—Ä—É–∑–∏—Ç—å seed –¥–∞–Ω–Ω—ã–µ
docker-compose exec web bin/rails db:seed
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –û—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ:
http://localhost:3000         # Web UI
http://localhost:3000/api-docs # Swagger UI
http://localhost:9001         # MinIO Console

# Health check
curl http://localhost:3000/up
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### 1. JWT —Å Redis Blacklist

**–†–µ—à–µ–Ω–∏–µ**: –ö–æ–º–±–∏–Ω–∞—Ü–∏—è stateless JWT —Å stateful blacklist –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ logout.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ë—ã—Å—Ç—Ä–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (–±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ë–î –Ω–∞ –∫–∞–∂–¥—ã–π –∑–∞–ø—Ä–æ—Å)
- –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–æ–≤ –ø—Ä–∏ logout
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ —á–µ—Ä–µ–∑ Redis TTL

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:
- ‚ùå Session-based auth - –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è –¥–ª—è API
- ‚ùå Pure JWT - –Ω–µ–≤–æ–∑–º–æ–∂–µ–Ω logout –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è —Ç–æ–∫–µ–Ω–∞
- ‚ùå OAuth 2.0 - –∏–∑–ª–∏—à–Ω–µ —Å–ª–æ–∂–Ω–æ –¥–ª—è –¥–∞–Ω–Ω–æ–≥–æ —Å–ª—É—á–∞—è

### 2. State Machine –¥–ª—è BeamDeflection

**–†–µ—à–µ–Ω–∏–µ**: –Ø–≤–Ω—ã–π state machine —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –∏ —Ä–æ–ª–µ–≤–æ–π –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- –ü–æ–Ω—è—Ç–Ω—ã–π –∂–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –∑–∞—è–≤–æ–∫
- –ù–µ–≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å invalid transitions
- Audit trail —á–µ—Ä–µ–∑ timestamps (formed_at, completed_at)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:
- ‚ùå Boolean flags (is_draft, is_completed) - —Ö–∞–æ—Ç–∏—á–Ω–æ, –≤–æ–∑–º–æ–∂–Ω—ã invalid states
- ‚ùå AASM gem - –∏–∑–±—ã—Ç–æ—á–Ω–æ –¥–ª—è 5 —Å–æ—Å—Ç–æ—è–Ω–∏–π

### 3. MinIO –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π

**–†–µ—à–µ–Ω–∏–µ**: S3-compatible MinIO –≤–º–µ—Å—Ç–æ Active Storage.

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- Self-hosted (–Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≤–Ω–µ—à–Ω–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤)
- S3 API (–ª–µ–≥–∫–æ –º–∏–≥—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ AWS S3)
- –û—Ç–¥–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å (–Ω–µ –Ω–∞–≥—Ä—É–∂–∞–µ—Ç Rails)

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã**:
- ‚ùå Active Storage - –∏–∑–±—ã—Ç–æ—á–Ω–æ (disabled –≤ config/application.rb)
- ‚ùå –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ - –Ω–µ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ—Ç—Å—è, —Å–ª–æ–∂–Ω–æ—Å—Ç—å —Å Docker volumes

### 4. Concerns –¥–ª—è Scopes

**–†–µ—à–µ–Ω–∏–µ**: –í—ã–Ω–æ—Å scopes –∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç –≤ concerns (BeamScopes, BeamDeflectionScopes).

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞**:
- DRY (–∏–∑–±–µ–∂–∞–Ω–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è)
- –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å scopes –æ—Ç–¥–µ–ª—å–Ω–æ
- –£–º–µ–Ω—å—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –º–æ–¥–µ–ª–µ–π

**–ù–µ–¥–æ—Å—Ç–∞—Ç–∫–∏**:
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –ø–æ–∏—Å–∫–∞ –ª–æ–≥–∏–∫–∏

---

## –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

### –§–æ—Ä–º—É–ª–∞ —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–æ–≥–∏–±–∞

–î–ª—è –æ–¥–Ω–æ–ø—Ä–æ–ª–µ—Ç–Ω–æ–π –±–∞–ª–∫–∏ —Å —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–æ–π:

```
Œ¥ = (5 √ó q √ó L‚Å¥) / (384 √ó E √ó J)

–≥–¥–µ:
  Œ¥ - –ø—Ä–æ–≥–∏–± –≤ —Ü–µ–Ω—Ç—Ä–µ –±–∞–ª–∫–∏ (–º–º)
  q - —Ä–∞–≤–Ω–æ–º–µ—Ä–Ω–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ (–ù/–º)
  L - –¥–ª–∏–Ω–∞ –±–∞–ª–∫–∏ (–º)
  E - –º–æ–¥—É–ª—å —É–ø—Ä—É–≥–æ—Å—Ç–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ (–ü–∞)
  J - –º–æ–º–µ–Ω—Ç –∏–Ω–µ—Ä—Ü–∏–∏ —Å–µ—á–µ–Ω–∏—è (–º‚Å¥)
```

**–ü—Ä–∏–º–µ—Ä**:
```ruby
# –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
length_m = 6.0        # 6 –º–µ—Ç—Ä–æ–≤
udl_kn_m = 10.5       # 10.5 –∫–ù/–º
elasticity_gpa = 200  # 200 –ì–ü–∞ (—Å—Ç–∞–ª—å)
inertia_cm4 = 1840    # 1840 —Å–º‚Å¥ (–¥–≤—É—Ç–∞–≤—Ä 20)

# –†–∞—Å—á–µ—Ç
q = 10.5 * 1000                    # 10500 –ù/–º
e = 200 * 1e9                      # 2e11 –ü–∞
j = 1840 * 1e-8                    # 1.84e-5 –º‚Å¥
deflection_m = 5 * q * (6**4) / (384 * e * j)
deflection_mm = deflection_m * 1000  # 12.34 –º–º
```

### Workflow –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

```mermaid
graph TD
    START([–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤—Ö–æ–¥–∏—Ç]) --> BROWSE[–ü—Ä–æ—Å–º–æ—Ç—Ä –∫–∞—Ç–∞–ª–æ–≥–∞ –±–∞–ª–æ–∫]
    BROWSE --> ADD[–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–∞–ª–∫–∏ –≤ —á–µ—Ä–Ω–æ–≤–∏–∫]
    ADD --> MORE{–î–æ–±–∞–≤–∏—Ç—å –µ—â–µ?}
    MORE -->|–î–∞| BROWSE
    MORE -->|–ù–µ—Ç| PARAMS[–í–≤–æ–¥ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ L, q]
    PARAMS --> FORM[–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ —Ä–∞—Å—á–µ—Ç–∞]
    FORM --> WAIT[–û–∂–∏–¥–∞–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ü–∏–∏]

    WAIT --> MOD_DECISION{–†–µ—à–µ–Ω–∏–µ –º–æ–¥–µ—Ä–∞—Ç–æ—Ä–∞}
    MOD_DECISION -->|–û–¥–æ–±—Ä–µ–Ω–æ| RESULT[–ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ Œ¥]
    MOD_DECISION -->|–û—Ç–∫–ª–æ–Ω–µ–Ω–æ| REJECTED[–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ–± –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏]

    RESULT --> END([–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ])
    REJECTED --> START
```

---

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### RSpec Tests

```bash
# –í—Å–µ —Ç–µ—Å—Ç—ã
docker-compose exec web bundle exec rspec

# –ú–æ–¥–µ–ª–∏
docker-compose exec web bundle exec rspec spec/models/

# API integration (–≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç Swagger)
docker-compose exec web bundle exec rspec spec/integration/

# –° coverage
docker-compose exec web bundle exec rspec --format documentation
```

### Swagger Testing

1. –û—Ç–∫—Ä—ã—Ç—å `http://localhost:3000/api-docs`
2. –ù–∞–∂–∞—Ç—å **Authorize**
3. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω —á–µ—Ä–µ–∑ `/api/auth/sign_in`
4. –í–≤–µ—Å—Ç–∏: `Bearer <token>`
5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å endpoints

### Manual Testing

```bash
# Sign up
curl -X POST http://localhost:3000/api/auth/sign_up \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123",
    "password_confirmation": "password123"
  }'

# Sign in
curl -X POST http://localhost:3000/api/auth/sign_in \
  -H "Content-Type: application/json" \
  -d '{
    "email": "test@example.com",
    "password": "password123"
  }'

# Get profile (with token)
curl http://localhost:3000/api/me \
  -H "Authorization: Bearer <token>"
```

---

## Production Deployment

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

1. **Environment Variables**
   ```bash
   # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ SECRET_KEY_BASE
   rails secret

   # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Docker secrets
   docker secret create db_password /path/to/password
   ```

2. **SSL/TLS**
   ```ruby
   # config/environments/production.rb
   config.force_ssl = true
   ```

3. **Database**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å managed PostgreSQL (AWS RDS, Azure Database)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å connection pooling
   - –†–µ–≥—É–ª—è—Ä–Ω—ã–µ backups

4. **Redis**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å managed Redis (AWS ElastiCache)
   - –ù–∞—Å—Ç—Ä–æ–∏—Ç—å persistence (AOF + RDB)
   - –†–µ–ø–ª–∏–∫–∏ –¥–ª—è failover

5. **MinIO**
   - Distributed mode (–º–∏–Ω–∏–º—É–º 4 nodes)
   - –ò–ª–∏ –º–∏–≥—Ä–∞—Ü–∏—è –Ω–∞ AWS S3 / DigitalOcean Spaces

6. **Monitoring**
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ: Logrotate, ELK stack
   - –ú–µ—Ç—Ä–∏–∫–∏: Prometheus + Grafana
   - Alerting: PagerDuty, Opsgenie

7. **Security**
   - Rate limiting (Rack::Attack)
   - WAF (ModSecurity, Cloudflare)
   - Regular security audits (Brakeman, bundler-audit)

---

## Troubleshooting

### –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

#### 1. Docker services not starting
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
docker-compose logs

# –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down
docker-compose build --no-cache
docker-compose up
```

#### 2. Database connection errors
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å DATABASE_HOST
docker-compose exec web env | grep DATABASE

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –ë–î
docker-compose exec web bin/rails db:drop db:create db:migrate
```

#### 3. JWT token invalid
```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å SECRET_KEY_BASE
docker-compose exec web env | grep SECRET_KEY_BASE

# –û—á–∏—Å—Ç–∏—Ç—å Redis blacklist
docker-compose exec redis redis-cli FLUSHDB
```

#### 4. MinIO access denied
```bash
# –°–æ–∑–¥–∞—Ç—å bucket
aws --endpoint-url http://localhost:9000 \
    s3 mb s3://beam-deflection

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å credentials
docker-compose exec web env | grep MINIO
```

---

## Contributing

### Code Style

```bash
# Run RuboCop
docker-compose exec web bundle exec rubocop

# Auto-fix
docker-compose exec web bundle exec rubocop -A
```

### Git Workflow

```bash
# Create feature branch
git checkout -b feature/my-feature

# Make changes and commit
git add .
git commit -m "Add feature X"

# Push and create PR
git push origin feature/my-feature
```

### Pull Request Checklist

- [ ] Tests pass (`bundle exec rspec`)
- [ ] RuboCop passes (`bundle exec rubocop`)
- [ ] Swagger docs updated (run integration specs)
- [ ] CLAUDE.md updated (if needed)
- [ ] Migration reviewed (if added)

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã

- [CLAUDE.md](../CLAUDE.md) - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è Claude Code
- [README.md](../README.md) - –æ—Å–Ω–æ–≤–Ω–æ–π README –ø—Ä–æ–µ–∫—Ç–∞
- [swagger/v1/swagger.yaml](../swagger/v1/swagger.yaml) - OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è

### –í–Ω–µ—à–Ω–∏–µ —Ä–µ—Å—É—Ä—Å—ã

- [Rails Guides](https://guides.rubyonrails.org/)
- [PostgreSQL Documentation](https://www.postgresql.org/docs/)
- [Redis Documentation](https://redis.io/docs/)
- [MinIO Documentation](https://min.io/docs/)
- [JWT.io](https://jwt.io/)
- [Docker Documentation](https://docs.docker.com/)

---

## –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: [GitHub](https://github.com/your-repo)

**Issues**: [GitHub Issues](https://github.com/your-repo/issues)

---

## –õ–∏—Ü–µ–Ω–∑–∏—è

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —É—á–µ–±–Ω—ã–º. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª LICENSE –≤ –∫–æ—Ä–Ω–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

---

## Changelog

### Version 1.0.0 (2025-01-01)
- –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑ —Å –ø–æ–ª–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –¥–∏–∞–≥—Ä–∞–º–º—ã (ERD, State Machine, API, Auth, Docker)
- Swagger/OpenAPI —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è
- Docker Compose setup
- JWT authentication —Å Redis blacklist
- MinIO –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

---

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞ –Ω–∞: **2025-12-01**

–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ: **2025-12-01**
